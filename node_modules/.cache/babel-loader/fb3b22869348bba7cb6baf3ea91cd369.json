{"ast":null,"code":"var _jsxFileName = \"D:\\\\Amardeep\\\\tarek_project\\\\ftw-product\\\\src\\\\containers\\\\ManageListingsPage\\\\ManageListingsPage.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { FormattedMessage, injectIntl, intlShape } from '../../util/reactIntl';\nimport { propTypes } from '../../util/types';\nimport { isScrollingDisabled } from '../../ducks/UI.duck';\nimport { Page, PaginationLinks, UserNav, LayoutSingleColumn, LayoutWrapperTopbar, LayoutWrapperMain, LayoutWrapperFooter, Footer } from '../../components';\nimport TopbarContainer from '../../containers/TopbarContainer/TopbarContainer';\nimport ManageListingCard from './ManageListingCard/ManageListingCard';\nimport { closeListing, openListing, getOwnListingsById } from './ManageListingsPage.duck';\nimport css from './ManageListingsPage.module.css';\nexport class ManageListingsPageComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listingMenuOpen: null\n    };\n    this.onToggleMenu = this.onToggleMenu.bind(this);\n  }\n\n  onToggleMenu(listing) {\n    this.setState({\n      listingMenuOpen: listing\n    });\n  }\n\n  render() {\n    const {\n      closingListing,\n      closingListingError,\n      listings,\n      onCloseListing,\n      onOpenListing,\n      openingListing,\n      openingListingError,\n      pagination,\n      queryInProgress,\n      queryListingsError,\n      queryParams,\n      scrollingDisabled,\n      intl\n    } = this.props;\n    const hasPaginationInfo = !!pagination && pagination.totalItems != null;\n    const listingsAreLoaded = !queryInProgress && hasPaginationInfo;\n    const loadingResults = /*#__PURE__*/React.createElement(\"div\", {\n      className: css.messagePanel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: css.loadingData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"ManageListingsPage.loadingOwnListings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    })));\n    const queryError = /*#__PURE__*/React.createElement(\"div\", {\n      className: css.messagePanel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: css.error,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"ManageListingsPage.queryError\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    })));\n    const noResults = listingsAreLoaded && pagination.totalItems === 0 ? /*#__PURE__*/React.createElement(\"h1\", {\n      className: css.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"ManageListingsPage.noResults\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    })) : null;\n    const heading = listingsAreLoaded && pagination.totalItems > 0 ? /*#__PURE__*/React.createElement(\"h1\", {\n      className: css.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"ManageListingsPage.youHaveListings\",\n      values: {\n        count: pagination.totalItems\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    })) : noResults;\n    const page = queryParams ? queryParams.page : 1;\n    const paginationLinks = listingsAreLoaded && pagination && pagination.totalPages > 1 ? /*#__PURE__*/React.createElement(PaginationLinks, {\n      className: css.pagination,\n      pageName: \"ManageListingsPage\",\n      pageSearchParams: {\n        page\n      },\n      pagination: pagination,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }\n    }) : null;\n    const listingMenuOpen = this.state.listingMenuOpen;\n    const closingErrorListingId = !!closingListingError && closingListingError.listingId;\n    const openingErrorListingId = !!openingListingError && openingListingError.listingId;\n    const title = intl.formatMessage({\n      id: 'ManageListingsPage.title'\n    });\n    const panelWidth = 62.5; // Render hints for responsive image\n\n    const renderSizes = [`(max-width: 767px) 100vw`, `(max-width: 1920px) ${panelWidth / 2}vw`, `${panelWidth / 3}vw`].join(', ');\n    return /*#__PURE__*/React.createElement(Page, {\n      title: title,\n      scrollingDisabled: scrollingDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(LayoutSingleColumn, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(LayoutWrapperTopbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TopbarContainer, {\n      currentPage: \"ManageListingsPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(UserNav, {\n      selectedPageName: \"ManageListingsPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(LayoutWrapperMain, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, queryInProgress ? loadingResults : null, queryListingsError ? queryError : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: css.listingPanel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, heading, /*#__PURE__*/React.createElement(\"div\", {\n      className: css.listingCards,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, listings.map(l => /*#__PURE__*/React.createElement(ManageListingCard, {\n      className: css.listingCard,\n      key: l.id.uuid,\n      listing: l,\n      isMenuOpen: !!listingMenuOpen && listingMenuOpen.id.uuid === l.id.uuid,\n      actionsInProgressListingId: openingListing || closingListing,\n      onToggleMenu: this.onToggleMenu,\n      onCloseListing: onCloseListing,\n      onOpenListing: onOpenListing,\n      hasOpeningError: openingErrorListingId.uuid === l.id.uuid,\n      hasClosingError: closingErrorListingId.uuid === l.id.uuid,\n      renderSizes: renderSizes,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }))), paginationLinks)), /*#__PURE__*/React.createElement(LayoutWrapperFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\nManageListingsPageComponent.defaultProps = {\n  listings: [],\n  pagination: null,\n  queryListingsError: null,\n  queryParams: null,\n  closingListing: null,\n  closingListingError: null,\n  openingListing: null,\n  openingListingError: null\n};\nconst {\n  arrayOf,\n  bool,\n  func,\n  object,\n  shape,\n  string\n} = PropTypes;\nManageListingsPageComponent.propTypes = {\n  closingListing: shape({\n    uuid: string.isRequired\n  }),\n  closingListingError: shape({\n    listingId: propTypes.uuid.isRequired,\n    error: propTypes.error.isRequired\n  }),\n  listings: arrayOf(propTypes.ownListing),\n  onCloseListing: func.isRequired,\n  onOpenListing: func.isRequired,\n  openingListing: shape({\n    uuid: string.isRequired\n  }),\n  openingListingError: shape({\n    listingId: propTypes.uuid.isRequired,\n    error: propTypes.error.isRequired\n  }),\n  pagination: propTypes.pagination,\n  queryInProgress: bool.isRequired,\n  queryListingsError: propTypes.error,\n  queryParams: object,\n  scrollingDisabled: bool.isRequired,\n  // from injectIntl\n  intl: intlShape.isRequired\n};\n\nconst mapStateToProps = state => {\n  const {\n    currentPageResultIds,\n    pagination,\n    queryInProgress,\n    queryListingsError,\n    queryParams,\n    openingListing,\n    openingListingError,\n    closingListing,\n    closingListingError\n  } = state.ManageListingsPage;\n  const listings = getOwnListingsById(state, currentPageResultIds);\n  return {\n    currentPageResultIds,\n    listings,\n    pagination,\n    queryInProgress,\n    queryListingsError,\n    queryParams,\n    scrollingDisabled: isScrollingDisabled(state),\n    openingListing,\n    openingListingError,\n    closingListing,\n    closingListingError\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  onCloseListing: listingId => dispatch(closeListing(listingId)),\n  onOpenListing: listingId => dispatch(openListing(listingId))\n});\n\nconst ManageListingsPage = compose(connect(mapStateToProps, mapDispatchToProps), injectIntl)(ManageListingsPageComponent);\nexport default ManageListingsPage;","map":{"version":3,"sources":["D:/Amardeep/tarek_project/ftw-product/src/containers/ManageListingsPage/ManageListingsPage.js"],"names":["React","Component","PropTypes","compose","connect","FormattedMessage","injectIntl","intlShape","propTypes","isScrollingDisabled","Page","PaginationLinks","UserNav","LayoutSingleColumn","LayoutWrapperTopbar","LayoutWrapperMain","LayoutWrapperFooter","Footer","TopbarContainer","ManageListingCard","closeListing","openListing","getOwnListingsById","css","ManageListingsPageComponent","constructor","props","state","listingMenuOpen","onToggleMenu","bind","listing","setState","render","closingListing","closingListingError","listings","onCloseListing","onOpenListing","openingListing","openingListingError","pagination","queryInProgress","queryListingsError","queryParams","scrollingDisabled","intl","hasPaginationInfo","totalItems","listingsAreLoaded","loadingResults","messagePanel","loadingData","queryError","error","noResults","title","heading","count","page","paginationLinks","totalPages","closingErrorListingId","listingId","openingErrorListingId","formatMessage","id","panelWidth","renderSizes","join","listingPanel","listingCards","map","l","listingCard","uuid","defaultProps","arrayOf","bool","func","object","shape","string","isRequired","ownListing","mapStateToProps","currentPageResultIds","ManageListingsPage","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { FormattedMessage, injectIntl, intlShape } from '../../util/reactIntl';\r\nimport { propTypes } from '../../util/types';\r\nimport { isScrollingDisabled } from '../../ducks/UI.duck';\r\n\r\nimport {\r\n  Page,\r\n  PaginationLinks,\r\n  UserNav,\r\n  LayoutSingleColumn,\r\n  LayoutWrapperTopbar,\r\n  LayoutWrapperMain,\r\n  LayoutWrapperFooter,\r\n  Footer,\r\n} from '../../components';\r\nimport TopbarContainer from '../../containers/TopbarContainer/TopbarContainer';\r\n\r\nimport ManageListingCard from './ManageListingCard/ManageListingCard';\r\n\r\nimport { closeListing, openListing, getOwnListingsById } from './ManageListingsPage.duck';\r\nimport css from './ManageListingsPage.module.css';\r\n\r\nexport class ManageListingsPageComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { listingMenuOpen: null };\r\n    this.onToggleMenu = this.onToggleMenu.bind(this);\r\n  }\r\n\r\n  onToggleMenu(listing) {\r\n    this.setState({ listingMenuOpen: listing });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      closingListing,\r\n      closingListingError,\r\n      listings,\r\n      onCloseListing,\r\n      onOpenListing,\r\n      openingListing,\r\n      openingListingError,\r\n      pagination,\r\n      queryInProgress,\r\n      queryListingsError,\r\n      queryParams,\r\n      scrollingDisabled,\r\n      intl,\r\n    } = this.props;\r\n\r\n    const hasPaginationInfo = !!pagination && pagination.totalItems != null;\r\n    const listingsAreLoaded = !queryInProgress && hasPaginationInfo;\r\n\r\n    const loadingResults = (\r\n      <div className={css.messagePanel}>\r\n        <h2 className={css.loadingData}>\r\n          <FormattedMessage id=\"ManageListingsPage.loadingOwnListings\" />\r\n        </h2>\r\n      </div>\r\n    );\r\n\r\n    const queryError = (\r\n      <div className={css.messagePanel}>\r\n        <h2 className={css.error}>\r\n          <FormattedMessage id=\"ManageListingsPage.queryError\" />\r\n        </h2>\r\n      </div>\r\n    );\r\n\r\n    const noResults =\r\n      listingsAreLoaded && pagination.totalItems === 0 ? (\r\n        <h1 className={css.title}>\r\n          <FormattedMessage id=\"ManageListingsPage.noResults\" />\r\n        </h1>\r\n      ) : null;\r\n\r\n    const heading =\r\n      listingsAreLoaded && pagination.totalItems > 0 ? (\r\n        <h1 className={css.title}>\r\n          <FormattedMessage\r\n            id=\"ManageListingsPage.youHaveListings\"\r\n            values={{ count: pagination.totalItems }}\r\n          />\r\n        </h1>\r\n      ) : (\r\n        noResults\r\n      );\r\n\r\n    const page = queryParams ? queryParams.page : 1;\r\n    const paginationLinks =\r\n      listingsAreLoaded && pagination && pagination.totalPages > 1 ? (\r\n        <PaginationLinks\r\n          className={css.pagination}\r\n          pageName=\"ManageListingsPage\"\r\n          pageSearchParams={{ page }}\r\n          pagination={pagination}\r\n        />\r\n      ) : null;\r\n\r\n    const listingMenuOpen = this.state.listingMenuOpen;\r\n    const closingErrorListingId = !!closingListingError && closingListingError.listingId;\r\n    const openingErrorListingId = !!openingListingError && openingListingError.listingId;\r\n\r\n    const title = intl.formatMessage({ id: 'ManageListingsPage.title' });\r\n\r\n    const panelWidth = 62.5;\r\n    // Render hints for responsive image\r\n    const renderSizes = [\r\n      `(max-width: 767px) 100vw`,\r\n      `(max-width: 1920px) ${panelWidth / 2}vw`,\r\n      `${panelWidth / 3}vw`,\r\n    ].join(', ');\r\n\r\n    return (\r\n      <Page title={title} scrollingDisabled={scrollingDisabled}>\r\n        <LayoutSingleColumn>\r\n          <LayoutWrapperTopbar>\r\n            <TopbarContainer currentPage=\"ManageListingsPage\" />\r\n            <UserNav selectedPageName=\"ManageListingsPage\" />\r\n          </LayoutWrapperTopbar>\r\n          <LayoutWrapperMain>\r\n            {queryInProgress ? loadingResults : null}\r\n            {queryListingsError ? queryError : null}\r\n            <div className={css.listingPanel}>\r\n              {heading}\r\n              <div className={css.listingCards}>\r\n                {listings.map(l => (\r\n                  <ManageListingCard\r\n                    className={css.listingCard}\r\n                    key={l.id.uuid}\r\n                    listing={l}\r\n                    isMenuOpen={!!listingMenuOpen && listingMenuOpen.id.uuid === l.id.uuid}\r\n                    actionsInProgressListingId={openingListing || closingListing}\r\n                    onToggleMenu={this.onToggleMenu}\r\n                    onCloseListing={onCloseListing}\r\n                    onOpenListing={onOpenListing}\r\n                    hasOpeningError={openingErrorListingId.uuid === l.id.uuid}\r\n                    hasClosingError={closingErrorListingId.uuid === l.id.uuid}\r\n                    renderSizes={renderSizes}\r\n                  />\r\n                ))}\r\n              </div>\r\n              {paginationLinks}\r\n            </div>\r\n          </LayoutWrapperMain>\r\n          <LayoutWrapperFooter>\r\n            <Footer />\r\n          </LayoutWrapperFooter>\r\n        </LayoutSingleColumn>\r\n      </Page>\r\n    );\r\n  }\r\n}\r\n\r\nManageListingsPageComponent.defaultProps = {\r\n  listings: [],\r\n  pagination: null,\r\n  queryListingsError: null,\r\n  queryParams: null,\r\n  closingListing: null,\r\n  closingListingError: null,\r\n  openingListing: null,\r\n  openingListingError: null,\r\n};\r\n\r\nconst { arrayOf, bool, func, object, shape, string } = PropTypes;\r\n\r\nManageListingsPageComponent.propTypes = {\r\n  closingListing: shape({ uuid: string.isRequired }),\r\n  closingListingError: shape({\r\n    listingId: propTypes.uuid.isRequired,\r\n    error: propTypes.error.isRequired,\r\n  }),\r\n  listings: arrayOf(propTypes.ownListing),\r\n  onCloseListing: func.isRequired,\r\n  onOpenListing: func.isRequired,\r\n  openingListing: shape({ uuid: string.isRequired }),\r\n  openingListingError: shape({\r\n    listingId: propTypes.uuid.isRequired,\r\n    error: propTypes.error.isRequired,\r\n  }),\r\n  pagination: propTypes.pagination,\r\n  queryInProgress: bool.isRequired,\r\n  queryListingsError: propTypes.error,\r\n  queryParams: object,\r\n  scrollingDisabled: bool.isRequired,\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  const {\r\n    currentPageResultIds,\r\n    pagination,\r\n    queryInProgress,\r\n    queryListingsError,\r\n    queryParams,\r\n    openingListing,\r\n    openingListingError,\r\n    closingListing,\r\n    closingListingError,\r\n  } = state.ManageListingsPage;\r\n  const listings = getOwnListingsById(state, currentPageResultIds);\r\n  return {\r\n    currentPageResultIds,\r\n    listings,\r\n    pagination,\r\n    queryInProgress,\r\n    queryListingsError,\r\n    queryParams,\r\n    scrollingDisabled: isScrollingDisabled(state),\r\n    openingListing,\r\n    openingListingError,\r\n    closingListing,\r\n    closingListingError,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onCloseListing: listingId => dispatch(closeListing(listingId)),\r\n  onOpenListing: listingId => dispatch(openListing(listingId)),\r\n});\r\n\r\nconst ManageListingsPage = compose(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  ),\r\n  injectIntl\r\n)(ManageListingsPageComponent);\r\n\r\nexport default ManageListingsPage;\r\n"]},"metadata":{},"sourceType":"module"}