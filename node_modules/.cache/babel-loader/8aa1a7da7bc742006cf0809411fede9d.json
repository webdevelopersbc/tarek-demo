{"ast":null,"code":"import { getCanonicalLocales } from './get-canonical-locales';\nimport { invariant } from './invariant';\nimport { toObject, getOption } from './polyfill-utils';\nexport function createResolveLocale(getDefaultLocale) {\n  var lookupMatcher = createLookupMatcher(getDefaultLocale);\n  var bestFitMatcher = createBestFitMatcher(getDefaultLocale);\n  /**\n   * https://tc39.es/ecma402/#sec-resolvelocale\n   */\n\n  return function resolveLocale(availableLocales, requestedLocales, options, relevantExtensionKeys, localeData) {\n    var matcher = options.localeMatcher;\n    var r;\n\n    if (matcher === 'lookup') {\n      r = lookupMatcher(availableLocales, requestedLocales);\n    } else {\n      r = bestFitMatcher(availableLocales, requestedLocales);\n    }\n\n    var foundLocale = r.locale;\n    var result = {\n      locale: '',\n      dataLocale: foundLocale\n    };\n    var supportedExtension = '-u';\n\n    for (var _i = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _i < relevantExtensionKeys_1.length; _i++) {\n      var key = relevantExtensionKeys_1[_i];\n      var foundLocaleData = localeData[foundLocale];\n      invariant(typeof foundLocaleData === 'object' && foundLocaleData !== null, \"locale data \" + key + \" must be an object\");\n      var keyLocaleData = foundLocaleData[key];\n      invariant(Array.isArray(keyLocaleData), 'keyLocaleData must be an array');\n      var value = keyLocaleData[0];\n      invariant(typeof value === 'string' || value === null, 'value must be string or null');\n      var supportedExtensionAddition = '';\n\n      if (r.extension) {\n        var requestedValue = unicodeExtensionValue(r.extension, key);\n\n        if (requestedValue !== undefined) {\n          if (requestedValue !== '') {\n            if (~keyLocaleData.indexOf(requestedValue)) {\n              value = requestedValue;\n              supportedExtensionAddition = \"-\" + key + \"-\" + value;\n            }\n          } else if (~requestedValue.indexOf('true')) {\n            value = 'true';\n            supportedExtensionAddition = \"-\" + key;\n          }\n        }\n      }\n\n      if (key in options) {\n        var optionsValue = options[key];\n        invariant(typeof optionsValue === 'string' || typeof optionsValue === 'undefined' || optionsValue === null, 'optionsValue must be String, Undefined or Null');\n\n        if (~keyLocaleData.indexOf(optionsValue)) {\n          if (optionsValue !== value) {\n            value = optionsValue;\n            supportedExtensionAddition = '';\n          }\n        }\n      }\n\n      result[key] = value;\n      supportedExtension += supportedExtensionAddition;\n    }\n\n    if (supportedExtension.length > 2) {\n      var privateIndex = foundLocale.indexOf('-x-');\n\n      if (privateIndex === -1) {\n        foundLocale = foundLocale + supportedExtension;\n      } else {\n        var preExtension = foundLocale.slice(0, privateIndex);\n        var postExtension = foundLocale.slice(privateIndex, foundLocale.length);\n        foundLocale = preExtension + supportedExtension + postExtension;\n      }\n\n      foundLocale = getCanonicalLocales(foundLocale)[0];\n    }\n\n    result.locale = foundLocale;\n    return result;\n  };\n}\n/**\n * https://tc39.es/ecma402/#sec-unicodeextensionvalue\n * @param extension\n * @param key\n */\n\nfunction unicodeExtensionValue(extension, key) {\n  invariant(key.length === 2, 'key must have 2 elements');\n  var size = extension.length;\n  var searchValue = \"-\" + key + \"-\";\n  var pos = extension.indexOf(searchValue);\n\n  if (pos !== -1) {\n    var start = pos + 4;\n    var end = start;\n    var k = start;\n    var done = false;\n\n    while (!done) {\n      var e = extension.indexOf('-', k);\n      var len = void 0;\n\n      if (e === -1) {\n        len = size - k;\n      } else {\n        len = e - k;\n      }\n\n      if (len === 2) {\n        done = true;\n      } else if (e === -1) {\n        end = size;\n        done = true;\n      } else {\n        end = e;\n        k = e + 1;\n      }\n    }\n\n    return extension.slice(start, end);\n  }\n\n  searchValue = \"-\" + key;\n  pos = extension.indexOf(searchValue);\n\n  if (pos !== -1 && pos + 3 === size) {\n    return '';\n  }\n\n  return undefined;\n}\n\nvar UNICODE_EXTENSION_SEQUENCE_REGEX = /-u(?:-[0-9a-z]{2,8})+/gi;\n/**\n * https://tc39.es/ecma402/#sec-bestavailablelocale\n * @param availableLocales\n * @param locale\n */\n\nfunction bestAvailableLocale(availableLocales, locale) {\n  var candidate = locale;\n\n  while (true) {\n    if (~availableLocales.indexOf(candidate)) {\n      return candidate;\n    }\n\n    var pos = candidate.lastIndexOf('-');\n\n    if (!~pos) {\n      return undefined;\n    }\n\n    if (pos >= 2 && candidate[pos - 2] === '-') {\n      pos -= 2;\n    }\n\n    candidate = candidate.slice(0, pos);\n  }\n}\n\nfunction createLookupMatcher(getDefaultLocale) {\n  /**\n   * https://tc39.es/ecma402/#sec-lookupmatcher\n   */\n  return function lookupMatcher(availableLocales, requestedLocales) {\n    var result = {\n      locale: ''\n    };\n\n    for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n      var locale = requestedLocales_1[_i];\n      var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n      var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n\n      if (availableLocale) {\n        result.locale = availableLocale;\n\n        if (locale !== noExtensionLocale) {\n          result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n        }\n\n        return result;\n      }\n    }\n\n    result.locale = getDefaultLocale();\n    return result;\n  };\n}\n\nfunction createBestFitMatcher(getDefaultLocale) {\n  return function bestFitMatcher(availableLocales, requestedLocales) {\n    var result = {\n      locale: ''\n    };\n\n    for (var _i = 0, requestedLocales_2 = requestedLocales; _i < requestedLocales_2.length; _i++) {\n      var locale = requestedLocales_2[_i];\n      var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n      var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n\n      if (availableLocale) {\n        result.locale = availableLocale;\n\n        if (locale !== noExtensionLocale) {\n          result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n        }\n\n        return result;\n      }\n    }\n\n    result.locale = getDefaultLocale();\n    return result;\n  };\n}\n\nexport function getLocaleHierarchy(locale, aliases, parentLocales) {\n  var results = [locale];\n\n  if (aliases[locale]) {\n    locale = aliases[locale];\n    results.push(locale);\n  }\n\n  var parentLocale = parentLocales[locale];\n\n  if (parentLocale) {\n    results.push(parentLocale);\n  }\n\n  var localeParts = locale.split('-');\n\n  for (var i = localeParts.length; i > 1; i--) {\n    results.push(localeParts.slice(0, i - 1).join('-'));\n  }\n\n  return results;\n}\n\nfunction lookupSupportedLocales(availableLocales, requestedLocales) {\n  var subset = [];\n\n  for (var _i = 0, requestedLocales_3 = requestedLocales; _i < requestedLocales_3.length; _i++) {\n    var locale = requestedLocales_3[_i];\n    var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n    var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n\n    if (availableLocale) {\n      subset.push(availableLocale);\n    }\n  }\n\n  return subset;\n}\n\nexport function supportedLocales(availableLocales, requestedLocales, options) {\n  var matcher = 'best fit';\n\n  if (options !== undefined) {\n    options = toObject(options);\n    matcher = getOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n  }\n\n  if (matcher === 'best fit') {\n    return lookupSupportedLocales(availableLocales, requestedLocales);\n  }\n\n  return lookupSupportedLocales(availableLocales, requestedLocales);\n}","map":{"version":3,"sources":["D:/Amardeep/tarek_project/ftw-product/node_modules/@formatjs/intl-utils/lib/resolve-locale.js"],"names":["getCanonicalLocales","invariant","toObject","getOption","createResolveLocale","getDefaultLocale","lookupMatcher","createLookupMatcher","bestFitMatcher","createBestFitMatcher","resolveLocale","availableLocales","requestedLocales","options","relevantExtensionKeys","localeData","matcher","localeMatcher","r","foundLocale","locale","result","dataLocale","supportedExtension","_i","relevantExtensionKeys_1","length","key","foundLocaleData","keyLocaleData","Array","isArray","value","supportedExtensionAddition","extension","requestedValue","unicodeExtensionValue","undefined","indexOf","optionsValue","privateIndex","preExtension","slice","postExtension","size","searchValue","pos","start","end","k","done","e","len","UNICODE_EXTENSION_SEQUENCE_REGEX","bestAvailableLocale","candidate","lastIndexOf","requestedLocales_1","noExtensionLocale","replace","availableLocale","requestedLocales_2","getLocaleHierarchy","aliases","parentLocales","results","push","parentLocale","localeParts","split","i","join","lookupSupportedLocales","subset","requestedLocales_3","supportedLocales"],"mappings":"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","sourcesContent":["import { getCanonicalLocales } from './get-canonical-locales';\nimport { invariant } from './invariant';\nimport { toObject, getOption } from './polyfill-utils';\nexport function createResolveLocale(getDefaultLocale) {\n    var lookupMatcher = createLookupMatcher(getDefaultLocale);\n    var bestFitMatcher = createBestFitMatcher(getDefaultLocale);\n    /**\n     * https://tc39.es/ecma402/#sec-resolvelocale\n     */\n    return function resolveLocale(availableLocales, requestedLocales, options, relevantExtensionKeys, localeData) {\n        var matcher = options.localeMatcher;\n        var r;\n        if (matcher === 'lookup') {\n            r = lookupMatcher(availableLocales, requestedLocales);\n        }\n        else {\n            r = bestFitMatcher(availableLocales, requestedLocales);\n        }\n        var foundLocale = r.locale;\n        var result = { locale: '', dataLocale: foundLocale };\n        var supportedExtension = '-u';\n        for (var _i = 0, relevantExtensionKeys_1 = relevantExtensionKeys; _i < relevantExtensionKeys_1.length; _i++) {\n            var key = relevantExtensionKeys_1[_i];\n            var foundLocaleData = localeData[foundLocale];\n            invariant(typeof foundLocaleData === 'object' && foundLocaleData !== null, \"locale data \" + key + \" must be an object\");\n            var keyLocaleData = foundLocaleData[key];\n            invariant(Array.isArray(keyLocaleData), 'keyLocaleData must be an array');\n            var value = keyLocaleData[0];\n            invariant(typeof value === 'string' || value === null, 'value must be string or null');\n            var supportedExtensionAddition = '';\n            if (r.extension) {\n                var requestedValue = unicodeExtensionValue(r.extension, key);\n                if (requestedValue !== undefined) {\n                    if (requestedValue !== '') {\n                        if (~keyLocaleData.indexOf(requestedValue)) {\n                            value = requestedValue;\n                            supportedExtensionAddition = \"-\" + key + \"-\" + value;\n                        }\n                    }\n                    else if (~requestedValue.indexOf('true')) {\n                        value = 'true';\n                        supportedExtensionAddition = \"-\" + key;\n                    }\n                }\n            }\n            if (key in options) {\n                var optionsValue = options[key];\n                invariant(typeof optionsValue === 'string' ||\n                    typeof optionsValue === 'undefined' ||\n                    optionsValue === null, 'optionsValue must be String, Undefined or Null');\n                if (~keyLocaleData.indexOf(optionsValue)) {\n                    if (optionsValue !== value) {\n                        value = optionsValue;\n                        supportedExtensionAddition = '';\n                    }\n                }\n            }\n            result[key] = value;\n            supportedExtension += supportedExtensionAddition;\n        }\n        if (supportedExtension.length > 2) {\n            var privateIndex = foundLocale.indexOf('-x-');\n            if (privateIndex === -1) {\n                foundLocale = foundLocale + supportedExtension;\n            }\n            else {\n                var preExtension = foundLocale.slice(0, privateIndex);\n                var postExtension = foundLocale.slice(privateIndex, foundLocale.length);\n                foundLocale = preExtension + supportedExtension + postExtension;\n            }\n            foundLocale = getCanonicalLocales(foundLocale)[0];\n        }\n        result.locale = foundLocale;\n        return result;\n    };\n}\n/**\n * https://tc39.es/ecma402/#sec-unicodeextensionvalue\n * @param extension\n * @param key\n */\nfunction unicodeExtensionValue(extension, key) {\n    invariant(key.length === 2, 'key must have 2 elements');\n    var size = extension.length;\n    var searchValue = \"-\" + key + \"-\";\n    var pos = extension.indexOf(searchValue);\n    if (pos !== -1) {\n        var start = pos + 4;\n        var end = start;\n        var k = start;\n        var done = false;\n        while (!done) {\n            var e = extension.indexOf('-', k);\n            var len = void 0;\n            if (e === -1) {\n                len = size - k;\n            }\n            else {\n                len = e - k;\n            }\n            if (len === 2) {\n                done = true;\n            }\n            else if (e === -1) {\n                end = size;\n                done = true;\n            }\n            else {\n                end = e;\n                k = e + 1;\n            }\n        }\n        return extension.slice(start, end);\n    }\n    searchValue = \"-\" + key;\n    pos = extension.indexOf(searchValue);\n    if (pos !== -1 && pos + 3 === size) {\n        return '';\n    }\n    return undefined;\n}\nvar UNICODE_EXTENSION_SEQUENCE_REGEX = /-u(?:-[0-9a-z]{2,8})+/gi;\n/**\n * https://tc39.es/ecma402/#sec-bestavailablelocale\n * @param availableLocales\n * @param locale\n */\nfunction bestAvailableLocale(availableLocales, locale) {\n    var candidate = locale;\n    while (true) {\n        if (~availableLocales.indexOf(candidate)) {\n            return candidate;\n        }\n        var pos = candidate.lastIndexOf('-');\n        if (!~pos) {\n            return undefined;\n        }\n        if (pos >= 2 && candidate[pos - 2] === '-') {\n            pos -= 2;\n        }\n        candidate = candidate.slice(0, pos);\n    }\n}\nfunction createLookupMatcher(getDefaultLocale) {\n    /**\n     * https://tc39.es/ecma402/#sec-lookupmatcher\n     */\n    return function lookupMatcher(availableLocales, requestedLocales) {\n        var result = { locale: '' };\n        for (var _i = 0, requestedLocales_1 = requestedLocales; _i < requestedLocales_1.length; _i++) {\n            var locale = requestedLocales_1[_i];\n            var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n            var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n            if (availableLocale) {\n                result.locale = availableLocale;\n                if (locale !== noExtensionLocale) {\n                    result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n                }\n                return result;\n            }\n        }\n        result.locale = getDefaultLocale();\n        return result;\n    };\n}\nfunction createBestFitMatcher(getDefaultLocale) {\n    return function bestFitMatcher(availableLocales, requestedLocales) {\n        var result = { locale: '' };\n        for (var _i = 0, requestedLocales_2 = requestedLocales; _i < requestedLocales_2.length; _i++) {\n            var locale = requestedLocales_2[_i];\n            var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n            var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n            if (availableLocale) {\n                result.locale = availableLocale;\n                if (locale !== noExtensionLocale) {\n                    result.extension = locale.slice(noExtensionLocale.length + 1, locale.length);\n                }\n                return result;\n            }\n        }\n        result.locale = getDefaultLocale();\n        return result;\n    };\n}\nexport function getLocaleHierarchy(locale, aliases, parentLocales) {\n    var results = [locale];\n    if (aliases[locale]) {\n        locale = aliases[locale];\n        results.push(locale);\n    }\n    var parentLocale = parentLocales[locale];\n    if (parentLocale) {\n        results.push(parentLocale);\n    }\n    var localeParts = locale.split('-');\n    for (var i = localeParts.length; i > 1; i--) {\n        results.push(localeParts.slice(0, i - 1).join('-'));\n    }\n    return results;\n}\nfunction lookupSupportedLocales(availableLocales, requestedLocales) {\n    var subset = [];\n    for (var _i = 0, requestedLocales_3 = requestedLocales; _i < requestedLocales_3.length; _i++) {\n        var locale = requestedLocales_3[_i];\n        var noExtensionLocale = locale.replace(UNICODE_EXTENSION_SEQUENCE_REGEX, '');\n        var availableLocale = bestAvailableLocale(availableLocales, noExtensionLocale);\n        if (availableLocale) {\n            subset.push(availableLocale);\n        }\n    }\n    return subset;\n}\nexport function supportedLocales(availableLocales, requestedLocales, options) {\n    var matcher = 'best fit';\n    if (options !== undefined) {\n        options = toObject(options);\n        matcher = getOption(options, 'localeMatcher', 'string', ['lookup', 'best fit'], 'best fit');\n    }\n    if (matcher === 'best fit') {\n        return lookupSupportedLocales(availableLocales, requestedLocales);\n    }\n    return lookupSupportedLocales(availableLocales, requestedLocales);\n}\n"]},"metadata":{},"sourceType":"module"}