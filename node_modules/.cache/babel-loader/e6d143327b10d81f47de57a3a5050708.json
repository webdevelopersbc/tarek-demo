{"ast":null,"code":"var _jsxFileName = \"D:\\\\Amardeep\\\\tarek_project\\\\ftw-product\\\\src\\\\containers\\\\SearchPage\\\\BookingDateRangeFilter\\\\FilterPopupForSidebar.js\";\nimport React, { Component } from 'react';\nimport { bool, func, node, number, object, string } from 'prop-types';\nimport classNames from 'classnames';\nimport { injectIntl, intlShape } from '../../../util/reactIntl';\nimport { OutsideClickHandler } from '../../../components';\nimport FilterForm from '../FilterForm/FilterForm';\nimport IconPlus from '../IconPlus/IconPlus';\nimport css from './FilterPopupForSidebar.module.css';\nconst KEY_CODE_ESCAPE = 27;\n\nclass FilterPopupForSidebar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false\n    };\n    this.filter = null;\n    this.filterContent = null;\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleClear = this.handleClear.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.toggleOpen = this.toggleOpen.bind(this);\n    this.positionStyleForContent = this.positionStyleForContent.bind(this);\n  }\n\n  handleSubmit(values) {\n    const {\n      onSubmit\n    } = this.props;\n    this.setState({\n      isOpen: false\n    });\n    onSubmit(values);\n  }\n\n  handleClear() {\n    const {\n      onSubmit,\n      onClear\n    } = this.props;\n    this.setState({\n      isOpen: false\n    });\n\n    if (onClear) {\n      onClear();\n    }\n\n    onSubmit(null);\n  }\n\n  handleCancel() {\n    const {\n      onSubmit,\n      onCancel,\n      initialValues\n    } = this.props;\n    this.setState({\n      isOpen: false\n    });\n\n    if (onCancel) {\n      onCancel();\n    }\n\n    onSubmit(initialValues);\n  }\n\n  handleBlur() {\n    this.setState({\n      isOpen: false\n    });\n  }\n\n  handleKeyDown(e) {\n    // Gather all escape presses to close menu\n    if (e.keyCode === KEY_CODE_ESCAPE) {\n      this.toggleOpen(false);\n    }\n  }\n\n  toggleOpen(enforcedState) {\n    if (enforcedState) {\n      this.setState({\n        isOpen: enforcedState\n      });\n    } else {\n      this.setState(prevState => ({\n        isOpen: !prevState.isOpen\n      }));\n    }\n  }\n\n  positionStyleForContent() {\n    if (this.filter && this.filterContent) {\n      // Render the filter content to the right from the menu\n      // unless there's no space in which case it is rendered\n      // to the left\n      const distanceToRight = window.innerWidth - this.filter.getBoundingClientRect().right;\n      const labelWidth = this.filter.offsetWidth;\n      const contentWidth = this.filterContent.offsetWidth;\n      const contentWidthBiggerThanLabel = contentWidth - labelWidth;\n      const renderToRight = distanceToRight > contentWidthBiggerThanLabel;\n      const contentPlacementOffset = this.props.contentPlacementOffset;\n      const offset = renderToRight ? {\n        left: contentPlacementOffset\n      } : {\n        right: contentPlacementOffset\n      }; // set a min-width if the content is narrower than the label\n\n      const minWidth = contentWidth < labelWidth ? {\n        minWidth: labelWidth\n      } : null;\n      return { ...offset,\n        ...minWidth\n      };\n    }\n\n    return {};\n  }\n\n  render() {\n    const {\n      rootClassName,\n      className,\n      popupClassName,\n      id,\n      label,\n      labelSelection,\n      isSelected,\n      children,\n      initialValues,\n      keepDirtyOnReinitialize,\n      contentPlacementOffset\n    } = this.props;\n    const classes = classNames(rootClassName || css.root, className);\n    const popupClasses = classNames(css.popup, {\n      [css.isOpen]: this.state.isOpen\n    });\n    const popupSizeClasses = popupClassName || css.popupSize;\n    const contentStyle = this.positionStyleForContent();\n    return /*#__PURE__*/React.createElement(OutsideClickHandler, {\n      className: css.root,\n      onOutsideClick: this.handleBlur,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes,\n      onKeyDown: this.handleKeyDown,\n      ref: node => {\n        this.filter = node;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: css.filterHeader,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: css.labelButton,\n      onClick: () => this.toggleOpen(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: css.labelButtonContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: css.labelWrapper,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: css.label,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    }, label, labelSelection ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, ': '), /*#__PURE__*/React.createElement(\"span\", {\n      className: css.labelSelected,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, labelSelection)) : null)), /*#__PURE__*/React.createElement(\"span\", {\n      className: css.openSign,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IconPlus, {\n      isOpen: this.state.isOpen,\n      isSelected: isSelected,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      id: id,\n      className: popupClasses,\n      ref: node => {\n        this.filterContent = node;\n      },\n      style: contentStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, this.state.isOpen ? /*#__PURE__*/React.createElement(FilterForm, {\n      id: `${id}.form`,\n      paddingClasses: popupSizeClasses,\n      showAsPopup: true,\n      contentPlacementOffset: contentPlacementOffset,\n      initialValues: initialValues,\n      keepDirtyOnReinitialize: keepDirtyOnReinitialize,\n      onSubmit: this.handleSubmit,\n      onCancel: this.handleCancel,\n      onClear: this.handleClear,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }\n    }, children) : null)));\n  }\n\n}\n\nFilterPopupForSidebar.defaultProps = {\n  rootClassName: null,\n  className: null,\n  popupClassName: null,\n  initialValues: null,\n  keepDirtyOnReinitialize: false,\n  contentPlacementOffset: 0,\n  liveEdit: false,\n  label: null,\n  labelMaxWidth: null\n};\nFilterPopupForSidebar.propTypes = {\n  rootClassName: string,\n  className: string,\n  popupClassName: string,\n  id: string.isRequired,\n  onSubmit: func.isRequired,\n  initialValues: object,\n  keepDirtyOnReinitialize: bool,\n  contentPlacementOffset: number,\n  label: string.isRequired,\n  isSelected: bool.isRequired,\n  children: node.isRequired,\n  // form injectIntl\n  intl: intlShape.isRequired\n};\nexport default _c = injectIntl(FilterPopupForSidebar);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["D:/Amardeep/tarek_project/ftw-product/src/containers/SearchPage/BookingDateRangeFilter/FilterPopupForSidebar.js"],"names":["React","Component","bool","func","node","number","object","string","classNames","injectIntl","intlShape","OutsideClickHandler","FilterForm","IconPlus","css","KEY_CODE_ESCAPE","FilterPopupForSidebar","constructor","props","state","isOpen","filter","filterContent","handleSubmit","bind","handleClear","handleCancel","handleBlur","handleKeyDown","toggleOpen","positionStyleForContent","values","onSubmit","setState","onClear","onCancel","initialValues","e","keyCode","enforcedState","prevState","distanceToRight","window","innerWidth","getBoundingClientRect","right","labelWidth","offsetWidth","contentWidth","contentWidthBiggerThanLabel","renderToRight","contentPlacementOffset","offset","left","minWidth","render","rootClassName","className","popupClassName","id","label","labelSelection","isSelected","children","keepDirtyOnReinitialize","classes","root","popupClasses","popup","popupSizeClasses","popupSize","contentStyle","filterHeader","labelButton","labelButtonContent","labelWrapper","labelSelected","openSign","defaultProps","liveEdit","labelMaxWidth","propTypes","isRequired","intl"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { bool, func, node, number, object, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { injectIntl, intlShape } from '../../../util/reactIntl';\r\n\r\nimport { OutsideClickHandler } from '../../../components';\r\n\r\nimport FilterForm from '../FilterForm/FilterForm';\r\nimport IconPlus from '../IconPlus/IconPlus';\r\n\r\nimport css from './FilterPopupForSidebar.module.css';\r\n\r\nconst KEY_CODE_ESCAPE = 27;\r\n\r\nclass FilterPopupForSidebar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { isOpen: false };\r\n    this.filter = null;\r\n    this.filterContent = null;\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleClear = this.handleClear.bind(this);\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n    this.handleBlur = this.handleBlur.bind(this);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    this.toggleOpen = this.toggleOpen.bind(this);\r\n    this.positionStyleForContent = this.positionStyleForContent.bind(this);\r\n  }\r\n\r\n  handleSubmit(values) {\r\n    const { onSubmit } = this.props;\r\n    this.setState({ isOpen: false });\r\n    onSubmit(values);\r\n  }\r\n\r\n  handleClear() {\r\n    const { onSubmit, onClear } = this.props;\r\n    this.setState({ isOpen: false });\r\n\r\n    if (onClear) {\r\n      onClear();\r\n    }\r\n\r\n    onSubmit(null);\r\n  }\r\n\r\n  handleCancel() {\r\n    const { onSubmit, onCancel, initialValues } = this.props;\r\n    this.setState({ isOpen: false });\r\n\r\n    if (onCancel) {\r\n      onCancel();\r\n    }\r\n\r\n    onSubmit(initialValues);\r\n  }\r\n\r\n  handleBlur() {\r\n    this.setState({ isOpen: false });\r\n  }\r\n\r\n  handleKeyDown(e) {\r\n    // Gather all escape presses to close menu\r\n    if (e.keyCode === KEY_CODE_ESCAPE) {\r\n      this.toggleOpen(false);\r\n    }\r\n  }\r\n\r\n  toggleOpen(enforcedState) {\r\n    if (enforcedState) {\r\n      this.setState({ isOpen: enforcedState });\r\n    } else {\r\n      this.setState(prevState => ({ isOpen: !prevState.isOpen }));\r\n    }\r\n  }\r\n\r\n  positionStyleForContent() {\r\n    if (this.filter && this.filterContent) {\r\n      // Render the filter content to the right from the menu\r\n      // unless there's no space in which case it is rendered\r\n      // to the left\r\n      const distanceToRight = window.innerWidth - this.filter.getBoundingClientRect().right;\r\n      const labelWidth = this.filter.offsetWidth;\r\n      const contentWidth = this.filterContent.offsetWidth;\r\n      const contentWidthBiggerThanLabel = contentWidth - labelWidth;\r\n      const renderToRight = distanceToRight > contentWidthBiggerThanLabel;\r\n      const contentPlacementOffset = this.props.contentPlacementOffset;\r\n\r\n      const offset = renderToRight\r\n        ? { left: contentPlacementOffset }\r\n        : { right: contentPlacementOffset };\r\n      // set a min-width if the content is narrower than the label\r\n      const minWidth = contentWidth < labelWidth ? { minWidth: labelWidth } : null;\r\n\r\n      return { ...offset, ...minWidth };\r\n    }\r\n    return {};\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      rootClassName,\r\n      className,\r\n      popupClassName,\r\n      id,\r\n      label,\r\n      labelSelection,\r\n      isSelected,\r\n      children,\r\n      initialValues,\r\n      keepDirtyOnReinitialize,\r\n      contentPlacementOffset,\r\n    } = this.props;\r\n\r\n    const classes = classNames(rootClassName || css.root, className);\r\n    const popupClasses = classNames(css.popup, { [css.isOpen]: this.state.isOpen });\r\n    const popupSizeClasses = popupClassName || css.popupSize;\r\n    const contentStyle = this.positionStyleForContent();\r\n\r\n    return (\r\n      <OutsideClickHandler className={css.root} onOutsideClick={this.handleBlur}>\r\n        <div\r\n          className={classes}\r\n          onKeyDown={this.handleKeyDown}\r\n          ref={node => {\r\n            this.filter = node;\r\n          }}\r\n        >\r\n          <div className={css.filterHeader}>\r\n            <button type=\"button\" className={css.labelButton} onClick={() => this.toggleOpen()}>\r\n              <span className={css.labelButtonContent}>\r\n                <span className={css.labelWrapper}>\r\n                  <span className={css.label}>\r\n                    {label}\r\n                    {labelSelection ? (\r\n                      <>\r\n                        <span>{': '}</span>\r\n                        <span className={css.labelSelected}>{labelSelection}</span>\r\n                      </>\r\n                    ) : null}\r\n                  </span>\r\n                </span>\r\n                <span className={css.openSign}>\r\n                  <IconPlus isOpen={this.state.isOpen} isSelected={isSelected} />\r\n                </span>\r\n              </span>\r\n            </button>\r\n          </div>\r\n          <div\r\n            id={id}\r\n            className={popupClasses}\r\n            ref={node => {\r\n              this.filterContent = node;\r\n            }}\r\n            style={contentStyle}\r\n          >\r\n            {this.state.isOpen ? (\r\n              <FilterForm\r\n                id={`${id}.form`}\r\n                paddingClasses={popupSizeClasses}\r\n                showAsPopup\r\n                contentPlacementOffset={contentPlacementOffset}\r\n                initialValues={initialValues}\r\n                keepDirtyOnReinitialize={keepDirtyOnReinitialize}\r\n                onSubmit={this.handleSubmit}\r\n                onCancel={this.handleCancel}\r\n                onClear={this.handleClear}\r\n              >\r\n                {children}\r\n              </FilterForm>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </OutsideClickHandler>\r\n    );\r\n  }\r\n}\r\n\r\nFilterPopupForSidebar.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  popupClassName: null,\r\n  initialValues: null,\r\n  keepDirtyOnReinitialize: false,\r\n  contentPlacementOffset: 0,\r\n  liveEdit: false,\r\n  label: null,\r\n  labelMaxWidth: null,\r\n};\r\n\r\nFilterPopupForSidebar.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  popupClassName: string,\r\n  id: string.isRequired,\r\n  onSubmit: func.isRequired,\r\n  initialValues: object,\r\n  keepDirtyOnReinitialize: bool,\r\n  contentPlacementOffset: number,\r\n  label: string.isRequired,\r\n  isSelected: bool.isRequired,\r\n  children: node.isRequired,\r\n\r\n  // form injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default injectIntl(FilterPopupForSidebar);\r\n"]},"metadata":{},"sourceType":"module"}